{"version":3,"sources":["features/visualizer/visualizer.module.css","features/toolbar.jsx","features/visualizer/helper.jsx","features/visualizer/visualizer.jsx"],"names":["module","exports","Toolbar","copyToClipBoard","text","JSON","stringify","props","data","copyTextToClipboard","toggleExpand","root","state","expanded","setState","toggleDelete","deleted","obj","this","Array","isArray","length","Object","keys","variant","tooltip","onClick","ButtonToolbar","ButtonGroup","className","Button","disabled","style","borderBottomLeftRadius","borderBottomRightRadius","Badge","getDataDescription","Fragment","Component","THEMES","light","key","str","num","null","boolean","dark","visualizeSimpleContents","isDarkMode","is_heading","b","s","getCss","theme","value_type","getCssForTheme","visualizeHeadings","console","log","Table","lazy","filter","memoize","filterText","filterObj","Visualizer","useSelector","statusbar","searchText","expandAll","collapseAll","input","settings","darkMode","TRUNCATE_LIMIT","truncateLimit","useState","renderExpandButton","isExpandable","truncateStrings","filteredData","makeTable","headings","table","rows","fallback","Spinner","animation","bordered","responsive","size","marginBottom","map","heading","row","rowIndex","cell","row_path","join_path","json_path","path_key","MyCell","value","th","slice","colIndex","renderTable","dispatch","useDispatch","Tag","event","stopPropagation","includes","target","nodeName","innerHTML","updateJsonPath","preventDefault"],"mappings":"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","file":"static/js/4.553d9123.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"visualizer_table__CVLDd\"};","import React, { Component } from \"react\";\nimport { FaUndo } from \"react-icons/fa\";\nimport { MdContentCopy, MdDelete } from \"react-icons/md\";\nimport { BiCollapse, BiExpand } from \"react-icons/bi\";\nimport ToolTipButton from \"./tooltip_button\";\nimport { copyTextToClipboard } from \"../app/utils\";\n\nimport { Badge, Button, ButtonGroup, ButtonToolbar } from \"react-bootstrap\";\n\nclass Toolbar extends Component {\n  copyToClipBoard = () => {\n    const text = JSON.stringify(this.props.data);\n    copyTextToClipboard(text);\n  };\n\n  toggleExpand = () => {\n    if (!this.props.root) {\n      let state = { ...this.props.state };\n      state.expanded = !state.expanded;\n      this.props.setState(state);\n    }\n  };\n\n  toggleDelete = () => {\n    let state = { ...this.props.state };\n    state.deleted = !state.deleted;\n    this.props.setState(state);\n  };\n\n  getDataDescription() {\n    const obj = this.props.data;\n    if (Array.isArray(obj)) {\n      const length = obj.length;\n      return `Array, [${length} item${length > 1 ? \"s\" : \"\"}]`;\n    }\n    if (typeof obj === \"object\") {\n      const length = Object.keys(obj).length;\n      return `Object, [${length} ${length > 1 ? \"Properties\" : \"Property\"}]`;\n    }\n    return typeof this.props.data;\n  }\n\n  render() {\n    if (this.props.state.deleted) {\n      return (\n        <ToolTipButton\n          variant=\"danger\"\n          tooltip=\"Undo Delete\"\n          onClick={this.toggleDelete}\n        >\n          <FaUndo />\n        </ToolTipButton>\n      );\n    }\n\n    const expanded = this.props.state.expanded || this.props.root;\n\n    return (\n      <ButtonToolbar aria-label=\"Toolbar with Button groups\">\n        <ButtonGroup className=\"me-2\" aria-label=\"First group\">\n          <Button\n            variant=\"primary\"\n            disabled\n            style={\n              expanded\n                ? { borderBottomLeftRadius: 0, borderBottomRightRadius: 0 }\n                : {}\n            }\n          >\n            <Badge variant=\"light\">{this.getDataDescription()}</Badge>\n          </Button>\n\n          {!this.props.root && (\n            <React.Fragment>\n              {expanded ? (\n                <ToolTipButton\n                  variant=\"warning\"\n                  tooltip=\"Collapse\"\n                  onClick={this.toggleExpand}\n                >\n                  <BiCollapse />\n                </ToolTipButton>\n              ) : (\n                <ToolTipButton\n                  variant=\"primary\"\n                  tooltip=\"Expand\"\n                  onClick={this.toggleExpand}\n                >\n                  <BiExpand />\n                </ToolTipButton>\n              )}\n              <ToolTipButton\n                variant=\"success\"\n                tooltip=\"Copy JSON\"\n                onClick={this.copyToClipBoard}\n              >\n                <MdContentCopy />\n              </ToolTipButton>\n              <ToolTipButton\n                variant=\"danger\"\n                tooltip=\"Delete from DOM\"\n                onClick={this.toggleDelete}\n                style={expanded ? { borderBottomRightRadius: 0 } : {}}\n              >\n                <MdDelete />\n              </ToolTipButton>\n            </React.Fragment>\n          )}\n        </ButtonGroup>\n      </ButtonToolbar>\n    );\n  }\n}\n\nexport default Toolbar;\n","// There are the css classes used by Monaco Editor for different data types. e.g;\n// mtk4, mtk5, mtk6, mtk7, ...\n// We are using the same classes.\nconst THEMES = {\n  light: {\n    key: \"mtk20\",\n    str: \"text-info\",\n    num: \"mtk7\",\n    null: \"text-danger\",\n    boolean: \"mtk5\",\n  },\n  dark: {\n    key: \"mtk4\",\n    str: \"text-info\",\n    num: \"mtk6\",\n    null: \"text-danger\",\n    boolean: \"mtk5\",\n  },\n};\n\nfunction getCssForTheme(isDarkMode) {\n  const theme = isDarkMode ? THEMES.dark : THEMES.light;\n  function getCss(value_type) {\n    return theme[value_type];\n  }\n  return getCss;\n}\n\nexport function isExpandable(data) {\n  if (data === null) {\n    return false;\n  }\n  if (Array.isArray(data)) {\n    return data.length > 0;\n  } else if (typeof data === \"object\") {\n    return Object.keys(data).length > 0;\n  }\n  return false;\n}\n\nexport function visualizeSimpleContents(data, isDarkMode, is_heading) {\n  const getCss = getCssForTheme(isDarkMode);\n\n  function visualizeNull() {\n    return <span className={getCss(\"null\")}>null</span>;\n  }\n\n  function visualizeHeadings(data) {\n    return <span className={getCss(\"key\")}>{data}</span>;\n  }\n\n  function visualizeString(s) {\n    return <span className={getCss(\"str\")}>{s ? s : '\"\"'}</span>;\n  }\n\n  function visualizeNumber(num) {\n    return <span className={getCss(\"num\")}>{num}</span>;\n  }\n\n  function visualizeBoolean(b) {\n    return <span className={getCss(\"boolean\")}>{b ? \"true\" : \"false\"}</span>;\n  }\n\n  if (is_heading) {\n    return visualizeHeadings(data);\n  } else if (data === null) {\n    return visualizeNull();\n  } else if (typeof data === \"string\") {\n    return visualizeString(data);\n  } else if (typeof data === \"number\") {\n    return visualizeNumber(data);\n  } else if (data === false || data === true) {\n    return visualizeBoolean(data);\n  } else if (Array.isArray(data)) {\n    // An \"Empty\" Array found\n    if (data.length < 1) {\n      return \"[]\";\n    }\n  } else if (typeof data === \"object\") {\n    // An \"Empty\" Object found\n    if (Object.keys(data).length < 1) {\n      return \"{}\";\n    }\n  }\n  if (typeof data === \"symbol\") {\n    // any React symbol that is ready to render\n    return data;\n  }\n\n  console.log(typeof data + \" to be displayed\");\n  return <p>Some Data of type {typeof data}</p>;\n}\n","import React, { lazy, Suspense, useState } from \"react\";\nimport Toolbar from \"../toolbar\";\nimport { Spinner } from \"react-bootstrap\";\nimport memoize from \"memoize-one\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport \"./visualizer.module.css\";\n\nimport makeTable, {\n  join_path,\n  filterObj,\n  truncateStrings,\n} from \"../../app/utils\";\n\nimport { isExpandable, visualizeSimpleContents } from \"./helper\";\nimport { updateJsonPath } from \"../statusbar/statusbarSlice\";\n\nconst Table = lazy(() => import(\"react-bootstrap/Table\"));\n\nconst filter = memoize((obj, filterText) => {\n  return filterObj(obj, filterText);\n});\n\nfunction Visualizer(props) {\n  const { searchText, expandAll, collapseAll } = useSelector(\n    (state) => state.statusbar\n  );\n  const { settings } = useSelector((state) => state.input);\n  const isDarkMode = settings.darkMode;\n  const TRUNCATE_LIMIT = settings.truncateLimit;\n\n  const [state, setState] = useState({\n    expanded: false,\n    deleted: false,\n  });\n\n  function renderTable(headings, rows) {\n    return (\n      <Suspense fallback={<Spinner animation=\"border\" variant=\"primary\" />}>\n        <Table\n          bordered\n          responsive={props.root ? true : false}\n          size=\"sm\"\n          variant={isDarkMode && \"dark\"}\n          style={{ marginBottom: 0 }}\n        >\n          <thead>\n            <tr>\n              {headings.map((heading) => (\n                <th key={heading} className=\"fit-contents\">\n                  {heading}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map((row, rowIndex) => {\n              const cell = row[0];\n              const row_path = join_path(props.json_path, cell.path_key);\n              return (\n                <tr key={rowIndex}>\n                  <MyCell\n                    key={cell.path_key}\n                    value={cell.value}\n                    th={true}\n                    json_path={row_path}\n                  />\n                  {row.slice(1).map((cell, colIndex) => {\n                    if (cell) {\n                      return (\n                        <MyCell\n                          key={cell.path_key}\n                          value={cell.value}\n                          json_path={join_path(row_path, cell.path_key)}\n                        />\n                      );\n                    }\n                    return <td key={colIndex}></td>;\n                  })}\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      </Suspense>\n    );\n  }\n\n  function renderExpandButton() {\n    return (\n      <Toolbar\n        data={props.data}\n        state={state}\n        setState={setState}\n        root={props.root}\n      />\n    );\n  }\n\n  if (state.deleted) {\n    return renderExpandButton();\n  }\n\n  const data = props.data;\n\n  // visualize simple data within a cell\n  if (!isExpandable(data)) {\n    if (settings.truncateStrings) {\n      const truncatedData = truncateStrings(data, TRUNCATE_LIMIT);\n      return visualizeSimpleContents(\n        truncatedData,\n        isDarkMode,\n        props.is_heading\n      );\n    }\n    return visualizeSimpleContents(data, isDarkMode, props.is_heading);\n  }\n\n  // if (props.root) {\n  //   console.log(\"Rendering root visualizer...\");\n  // } else {\n  //   console.log(\"Rendering child visualizer...\", state);\n  // }\n\n  const filteredData = filter(data, searchText);\n  const { headings, table } = makeTable(filteredData);\n  if (table.length < 1) {\n    if (props.root) {\n      return visualizeSimpleContents(\"NO RESULTS\", isDarkMode, true);\n    }\n    return null;\n  }\n\n  if (collapseAll) {\n    state.expanded = false;\n  } else if (expandAll) {\n    state.expanded = true;\n  }\n\n  if (props.root || searchText || state.expanded) {\n    // Visualize data along with a expand/collapse button\n    return (\n      <React.Fragment>\n        {renderExpandButton()}\n        {renderTable(headings, table)}\n      </React.Fragment>\n    );\n  }\n\n  // The data is collapsed, just render the button\n  return renderExpandButton();\n}\n\nfunction MyCell(props) {\n  const dispatch = useDispatch();\n\n  function handleClick(event) {\n    event.stopPropagation();\n    if (\n      [\"TD\", \"TH\", \"SPAN\"].includes(event.target.nodeName) &&\n      event.target.innerHTML\n    ) {\n      // handle the event\n      dispatch(updateJsonPath(props.json_path));\n    } else {\n      // ignore the event\n      event.preventDefault();\n    }\n  }\n\n  const Tag = props.th ? \"th\" : \"td\";\n  return (\n    <Tag onClick={handleClick}>\n      <Visualizer\n        is_heading={props.th}\n        data={props.value}\n        json_path={props.json_path}\n      />\n    </Tag>\n  );\n}\n\nexport default Visualizer;\n"],"sourceRoot":""}